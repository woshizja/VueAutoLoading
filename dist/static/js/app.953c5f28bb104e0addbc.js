webpackJsonp([1,0],[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}var o=i(14),n=s(o),a=i(8),l=s(a);new n["default"]({el:"#app",render:function(t){return t(l["default"])}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list01.jpg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list01.jpg-square",state:"hide"},{desc:"大量描述自动折行，限制两行，自动省略号。大量描述自动折行，限制两行，自动省略号。大量描述自动折行，限制两行，自动省略号。",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list02.jpg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list02.jpg-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list03.jpg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list03.jpg-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list04.JPG-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list04.JPG-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list05.JPG-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list05.JPG-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list06.jpeg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list06.jpeg-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list07.jpeg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list07.jpeg-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list08.jpg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list08.jpg-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list10.jpg-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list10.jpg-square",state:"hide"},{desc:"This is a lazy item.",smallSrc:"http://oenqoxl4h.bkt.clouddn.com/list09.png-small",bigSrc:"http://oenqoxl4h.bkt.clouddn.com/list09.png-square",state:"hide"}];e["default"]=i},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(9),n=s(o),a=i(10),l=s(a),c=i(1),r=s(c);e["default"]={data:function(){return{items:r["default"],itemsPos:[],timer:null,loader:[],isScrolling:!1,isLoading:!1}},components:{LazyItem:n["default"],LoadMore:l["default"]},mounted:function(){this.initPos(0),this.initStates(),this.bindEvent()},methods:{toggleLoad:function(t){t&&!this.isLoading?(this.isLoading=!this.isLoading,this.loadMore()):t||(this.isLoading=!this.isLoading)},loadMore:function(){var t=this;setTimeout(function(){for(var e=[],i=0;i<9;i++){var s={},o=Math.floor(10*Math.random());for(var n in t.items[o])s[n]=t.items[o][n];s.state="hide",e.push(s)}t.items=t.items.concat(e),t.$nextTick(function(){this.initPos(this.itemsPos.length)}),t.toggleLoad()},1600)},initPos:function(t){for(var e=document.querySelectorAll(".lazy-wrap"),i=t;i<e.length;i++)this.itemsPos.push(e[i].offsetTop)},initStates:function(){var t=this;this.itemsPos.some(function(e,i){return e>=window.innerHeight||void(t.items[i].state="show")})},clearLoader:function(){this.loader.length&&(this.loader.forEach(function(t){clearTimeout(t)}),this.loader.length=0)},bindEvent:function(){var t=this;window.addEventListener("scroll",function(e){return t.isScrolling?void t.clearLoader():(t.isScrolling=!0,void(t.timer=setTimeout(function(){t.clearLoader();var e=document.body.scrollTop;t.itemsPos.some(function(i,s){return i>=e+window.innerHeight-200||void(i>=e-200&&t.loader.push(setTimeout(function(){t.items[s].state="show"},250)))}),t.isScrolling=!1},250)))})}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:["itemData"],data:function(){return{imgSrc:""}},computed:{itemState:function(){return this.showPic(this.itemData.state),this.itemData.state}},methods:{showPic:function(t){var e=this;if("show"===t){this.imgSrc=this.itemData.smallSrc;var i=new Image;i.onload=function(){e.imgSrc=e.itemData.bigSrc},i.src=this.itemData.bigSrc}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:["isLoading"]}},function(t,e){},function(t,e){},function(t,e){},function(t,e,i){var s,o;i(5),s=i(2);var n=i(11);o=s=s||{},"object"!=typeof s["default"]&&"function"!=typeof s["default"]||(o=s=s["default"]),"function"==typeof o&&(o=o.options),o.render=n.render,o.staticRenderFns=n.staticRenderFns,t.exports=s},function(t,e,i){var s,o;i(6),s=i(3);var n=i(12);o=s=s||{},"object"!=typeof s["default"]&&"function"!=typeof s["default"]||(o=s=s["default"]),"function"==typeof o&&(o=o.options),o.render=n.render,o.staticRenderFns=n.staticRenderFns,o._scopeId="data-v-2",t.exports=s},function(t,e,i){var s,o;i(7),s=i(4);var n=i(13);o=s=s||{},"object"!=typeof s["default"]&&"function"!=typeof s["default"]||(o=s=s["default"]),"function"==typeof o&&(o=o.options),o.render=n.render,o.staticRenderFns=n.staticRenderFns,o._scopeId="data-v-3",t.exports=s},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"app"}},[_m(0)," ",_m(1)," ",_l(items,function(t){return _h("div",[_h("lazy-item",{attrs:{"item-data":t}})," ",_m(2,!0)])})," ",_h("load-more",{attrs:{"is-loading":isLoading},nativeOn:{click:function(t){toggleLoad(t)}}})])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"head"},[_h("h2",["Vue lazy scroll loading"])])},function(){with(this)return _h("div",{staticClass:"descp"},[_h("p",["基于",_h("b",["Vue2.0"]),"实现，图片随滚动",_h("b",["延迟"]),"加载，先请求",_h("b",["缩略图"]),"，缩略图加载后带模糊效果。滚动到底部后可",_h("b",["异步加载"]),"更多内容，实现无限加载。"])])},function(){with(this)return _h("i",{staticClass:"divide"})}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"lazy-wrap"},[_h("transition",{attrs:{name:"show"}},["hide"!==itemState?_h("div",{staticClass:"lazy-content"},[_h("div",{staticClass:"img-wrap"},[_h("img",{"class":{blur:"small"===itemState},attrs:{src:imgSrc}})])," ",itemData.desc?_h("div",{staticClass:"desc"},[_h("p",[_s(itemData.desc)])]):_e()]):_e()])," ","hide"===itemState?_h("div",{staticClass:"lazy-replace"},[_m(0)]):_e()])},staticRenderFns:[function(){with(this)return _h("span",["lazy-item"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"load-more"},[_h("span",{directives:[{name:"show",value:!isLoading,expression:"!isLoading"}]},["加载更多···"])," ",_h("span",{directives:[{name:"show",value:isLoading,expression:"isLoading"}],staticClass:"loading"})])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.953c5f28bb104e0addbc.js.map